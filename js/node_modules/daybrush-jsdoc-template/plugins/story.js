const path = require("path");


exports.defineTags = function(dictionary) {
    const env = require('jsdoc/env');
    function tagged(doclet, property, tag) {
        const storybookUrl = env.conf.storybookUrl || "";
        const title = (tag.value || tag.text).trim();
        const url = `${storybookUrl}/?path=/story/${title}`;

        property.story = {
            url,
            title,
        };
    }
    dictionary.defineTag("story", {
        onPropertyTagged: tagged,
        onTagged: function(doclet, tag) {
            tagged(doclet, doclet, tag);
        }
    });
};
